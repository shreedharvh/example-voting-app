pipeline {
  agent any

  tools{
    nodejs 'NodeJS 8.9.0'

  }

  stages{
      stage('build'){
        when {
          branch 'master'
          changeset "**/worker/**"
        }
        steps{
            echo 'Compiling result app..'
            dir('result'){
              sh 'npm install'
            }
        }
      }
      stage(two){
        when {
          branch 'master'
          changeset "**/worker/**"
        }
        steps{
            echo 'Running Unit Tets on result app..'
            dir('result'){
              sh 'npm test'
            }

        }
      }
  }
}
